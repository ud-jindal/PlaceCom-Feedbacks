CKEDITOR.editorConfig=function(e){e.filebrowserBrowseUrl="/ckeditor/attachment_files",e.filebrowserFlashBrowseUrl="/ckeditor/attachment_files",e.filebrowserFlashUploadUrl="/ckeditor/attachment_files",e.filebrowserImageBrowseLinkUrl="/ckeditor/pictures",e.filebrowserImageBrowseUrl="/ckeditor/pictures",e.filebrowserImageUploadUrl="/ckeditor/pictures",e.filebrowserUploadUrl="/ckeditor/attachment_files",e.filebrowserParams=function(){for(var e,r,t,n=document.getElementsByTagName("meta"),a=new Object,i=0;i<n.length;i++)switch(t=n[i],t.name){case"csrf-token":e=t.content;break;case"csrf-param":r=t.content;break;default:continue}return r!==undefined&&e!==undefined&&(a[r]=e),a},e.addQueryString=function(e,r){var t=[];if(!r)return e;for(var n in r)t.push(n+"="+encodeURIComponent(r[n]));return e+(e.indexOf("?")!=-1?"&":"?")+t.join("&")},CKEDITOR.on("dialogDefinition",function(r){var t,n,a=r.data.name,i=r.data.definition;CKEDITOR.tools.indexOf(["link","image","attachment","flash"],a)>-1&&(t=i.getContents("Upload")||i.getContents("upload"),(n=null==t?null:t.get("upload"))&&n.filebrowser&&n.filebrowser.params===undefined&&(n.filebrowser.params=e.filebrowserParams(),n.action=e.addQueryString(n.action,n.filebrowser.params)))})};